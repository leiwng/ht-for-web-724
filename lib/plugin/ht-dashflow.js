!function(I){"use strict";var f="ht",j=I[f],A=j.Default,P=Math,d=(P.PI,P.sin,P.cos,P.atan2,P.sqrt,P.max),p=P.floor,b=(P.round,P.ceil),r=j.Shape,N=(j.Edge,j.List),a=j.Style,$=j.graph,o=A.getInternal(),y=o.ui(),D=null,g="prototype",q=I.clearInterval,x=I.setInterval,c=function($){var u=$.data,q=this.dm();if(u&&"add"===$.kind){var F=q.$1c,A=u instanceof r?"shape.":"edge.";F&&u.s(A+"dash.flow")&&F.indexOf(u)<0&&F.push(u)}"clear"===$.kind&&(q.$1c=[])},z=function(R){var o=R.property,J=R.data,f=R.newValue,O=this.dm().$1c,h=J instanceof r?"s:shape.dash.flow":"s:edge.dash.flow";if(O&&o===h)if(f)O.indexOf(J)<0&&O.push(J);else for(var B=O.length,E=0;B>E;E++)if(O[E]===J){O.splice(E,1);break}},w=$.GraphView[g],K=y.EdgeUI[g],G=y.ShapeUI[g],m=G._80o,Y=K._80o,T=j.DataModel[g],O=T.prepareRemove,l=w.setDataModel;a["edge.dash.flow.step"]==D&&(a["edge.dash.flow.step"]=3),a["shape.dash.flow.step"]==D&&(a["shape.dash.flow.step"]=3),T.prepareRemove=function(b){O.call(this,b);var S=b._dataModel,Q=S.$1c;if(Q)for(var P=Q.length,A=0;P>A;A++)if(Q[A]===b){Q.splice(A,1);break}},w.setDataModel=function(n){var I=this,h=I._dataModel;if(h!==n){h&&(h.umm(c,I),h.umd(z,I),h.$1c=[]),n.mm(c,I),n.md(z,I);var P=n.$1c=[];n.each(function(s){var E=s instanceof r?"shape.":"edge.";s.s(E+"dash.flow")&&P.indexOf(s)<0&&P.push(s)}),l.call(I,n)}},w.setDashFlowInterval=function(h){var u=this,B=u.$2c;u.$2c=h,u.fp("dashFlowInterval",B,h),u.$3c!=D&&(q(u.$3c),delete u.$3c,u.enableDashFlow(h))},w.getDashFlowInterval=function(){return this.$2c},w.$4c=function(){var l,g,w,F=this,i=F.tx(),T=F.ty(),O=F._zoom,G=F.getWidth(),m=F.getHeight(),S={x:-i/O,y:-T/O,width:G/O,height:m/O},P=F.dm().$1c,t=F._56I,M=new N;if(P.forEach(function(y){t[y.getId()]&&(l=F.getDataUI(y),l&&(w=l._79o(),w&&M.add(w)))}),0!==M.size()&&(M.each(function(s){A.intersectsRect(S,s)&&(g=A.unionRect(g,s))}),g&&(g&&(A.grow(g,d(1,1/O)),g.x=p(g.x*O)/O,g.y=p(g.y*O)/O,g.width=b(g.width*O)/O,g.height=b(g.height*O)/O,g=A.intersection(S,g)),g))){var x=F._canvas.getContext("2d");x.save(),x.lineCap=A.lineCap,x.lineJoin=A.lineJoin;var z=A.devicePixelRatio,q=g.x,D=g.y,n=g.width,y=g.height;q=Math.floor((q*O+i)*z),D=Math.floor((D*O+T)*z),n=Math.ceil(n*O*z)+1,y=Math.ceil(y*O*z)+1,g.x=(q/z-i)/O,g.y=(D/z-T)/O,g.width=n/z/O,g.height=y/z/O,x.beginPath(),x.rect(q,D,n,y),x.clip(),x.clearRect(q,D,n,y),o.translateAndScale(x,i,T,O),F.$5c(x,g),x.restore()}},w.$5c=function(g,J){var X,t,y=this;y._93db(g),y.each(function(B){y._56I[B._id]&&(X=y.getDataUI(B),X&&(t=X._79o(),(!J||A.intersectsRect(J,t))&&(X.$7c=!0,X._42(g),delete X.$7c)))}),y._92db(g)},w.enableDashFlow=function(q){var l=this;l.$3c==D&&(l.$3c=x(function(){l.$4c()},q||l.$2c||50))},w.disableDashFlow=function(){var Y=this;q(Y.$3c),delete Y.$3c};var _=function(){var U=this,k=U._data,i=k instanceof r?"shape.":"edge.",c=k.s(i+"dash.pattern"),L=k.s(i+"dash.flow.reverse");if(c&&k.s(i+"dash")&&k.s(i+"dash.flow")&&U.$7c){var P=U.s(i+"dash.offset")||0,R=k.s(i+"dash.flow.step"),J=k.getStyleMap(),$=0;c.forEach(function(b){$+=b}),L&&(R=-R),P-=R,P%=$,J||(k._styleMap=J={}),J[i+"dash.offset"]=P}};K._80o=function(y){Y.call(this,y),_.call(this)},G._80o=function(e){m.call(this,e),_.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);