!function(v,c,G){"use strict";var t="px",C="0",T="innerHTML",D="className",s=ht.Default,g=ht.Color,X=ht.Node,P="position",Z="top",a="left",o=s.animate,S=s.getInternal(),L="width",C="0",z="none",$="max-height",p="font",f="background",O="border-box",I="user-select",x="box-sizing",M="overflow",i=s.isTouchable,B=s.isTouchEvent,S=s.getInternal(),w=g.titleIconBackground,Q=s.scrollBarInteractiveSize,h=/msie 9/.test(v.navigator?v.navigator.userAgent.toLowerCase():""),l=null,A=function(){return document},V=function(I){return A().createElement(I)},e=function(){return V("div")},j=function(){var b=e(),X=b.style;return X.msTouchAction=z,X.cursor="default",i&&X.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",l),X.position="absolute",X.left=C,X.top=C,b},k=function(){return V("canvas")},n=function(){return document.body},y=function(p,B,r){p.style.setProperty(B,r,l)},N=function(s,v){s.style.removeProperty(v)},F=function(B,P,L){s.def(ht.widget[B],P,L)},q=function(D,N){D.appendChild(N)},K=function(I,F){I.removeChild(F)},E=S.addEventListener;S.removeEventListener,S.addMethod(s,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:w,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:w}]},paletteTitleLabelColor:s.labelSelectColor,paletteTitleLabelFont:s.labelFont,paletteContentLabelFont:s.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:s.widgetTitleHeight,paletteTitleBackground:g.titleBackground,paletteTitleHoverBackground:g.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:G,paletteItemHoverBorderColor:g.highlight,paletteItemSelectBackground:g.highlight},!0);var H=".palette-item:hover{border: 1px solid "+s.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+s.paletteTitleHoverBackground+" !important}",J=document.createElement("style");i||(J.styleSheet?J.styleSheet.cssText=H:J.appendChild(A().createTextNode(H))),A().getElementsByTagName("head")[0].appendChild(J);var R=function(m){var n=this;n.$22h=m,n.addListeners()};s.def(R,c,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var s=this;s.$36h&&n().removeChild(s.$36h),s.$23h=s.$24h=s.$25h=s.$35h=s.$36h=l},handle_touchstart:function(f){for(var u,L=this,I=L.$22h,g=f.target,z=I.sm(),K=I.dm(),T="palette-header",N="palette-header-tool",R="palette-item",k=!1,H=!1,b=!1;g&&(g[D]||"").indexOf(T)<0&&(g[D]||"").indexOf(R)<0;)g=g.parentNode;if(g&&g[D].indexOf(N)>=0?k=!0:g&&g[D].indexOf(T)>=0?b=!0:g&&g[D].indexOf(R)>=0&&(H=!0),s.isLeftButton(f))if(L.$27h(f))L.$24h=s.getClientPoint(f),L.$25h=I.ty();else if(k){s.preventDefault(f),u=g.parentNode.$11h;var G=K.getDataById(u),B=G.s("tools")[g.toolIndex];B.action&&B.action.call(I)}else if(b){s.preventDefault(f),u=g.$11h;var G=K.getDataById(u);G.isExpanded()?G.setExpanded(!1):G.setExpanded(!0)}else if(H){u=g.$11h;var y=K.getDataById(u);z.ss(y),I.handleDragAndDrop&&(s.preventDefault(f),y.s("draggable")&&(I.handleDragAndDrop(f,"prepare"),L.$35h=0)),y.s("draggable")||(s.preventDefault(f),L.$24h=s.getClientPoint(f),L.$25h=I.ty())}else s.preventDefault(f),L.$24h=s.getClientPoint(f),L.$25h=I.ty();else L.$26h(f)},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_mousewheel:function(M){this.handleScroll(M,M.wheelDelta/40,M.wheelDelta!==M.wheelDeltaX)},handle_DOMMouseScroll:function(k){this.handleScroll(k,-k.detail,1)},handleScroll:function(b,m,D){var l=this.$22h;s.preventDefault(b),D&&l._41o()&&l.ty(l.ty()+20*m)},handle_mouseup:function(x){this.handle_touchend(x)},handle_touchend:function(s){var d=this;d.$37h(s),d.$26h(s)},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handleWindowTouchEnd:function(A){var C=this;C.$37h(A),C.$26h(A)},$37h:function(n){var j=this,T=j.$22h;2===j.$35h&&(j.$35h=3,T.handleDragAndDrop(n,"end"))},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},handleWindowTouchMove:function(X){var v=this,m=v.$22h,F=v.$23h,Q=v.$24h,d=v.$25h,r=s.getClientPoint(X),$=m._29I,A=v.$36h;if(1===v.$35h||2===v.$35h){if(v.$35h=2,m.handleDragAndDrop(X,"between"),B(X)){var n=X.touches[0];X=n?n:X.changedTouches[0]}A.style.left=X.pageX-parseInt(A.width)/2+t,A.style.top=X.pageY-parseInt(A.height)/2+t}else"p"===F?m.ty(d+r.y-Q.y):"v"===F&&m.ty(d+(Q.y-r.y)/$.height*m._59I)},handle_mousemove:function(F){this.handle_touchmove(F)},handle_touchmove:function(O){if(!s.isDragging()&&s.isLeftButton(O)){var g=this,i=g.$22h,w=g.$27h(O);if(g.$24h){if(!g.$23h){if(s.getDistance(s.getClientPoint(O),g.$24h)<2)return;g.$23h=w?"v":"p",s.startDragging(g,O)}}else if(w)i._43o();else if(0===g.$35h){if(g.$35h=1,i.handleDragAndDrop(O,"begin"),s.startDragging(g,O),B(O)){var F=O.touches[0];O=F?F:O.changedTouches[0]}var b=g.$36h=new Image,K=i.$10h[i.sm().ld().getId()].querySelector(".image-box"),C=parseInt(K.style.width),a=parseInt(K.style.height);b.draggable=!1,b.src=K.toDataURL(),b.width=C,b.height=a,b.style.position="absolute",b.style.left=O.pageX-C/2+t,b.style.top=O.pageY-a/2+t,n().appendChild(b)}}},$27h:function(m){var X=this.$22h,K=X.getView(),D=K.getBoundingClientRect(),g=X._29I,C=m.clientX-D.left+K.scrollLeft;return X._41o()&&g.x+g.width-C<Q}}),ht.widget.Palette=function(n){var k=this,B=k._view=S.createView(null,k);k.$9h={},k.$10h={},k.$4h={},k._29I={x:0,y:0,width:0,height:0},k._59I=0,k.dm(n?n:new ht.DataModel),B[D]="ht-widget-palette",k.$29h=new R(k),y(B,f,s.paletteContentBackground),y(B,M,"auto"),y(B,x,O),y(B,"-moz-"+x,O),y(B,"-webkit-"+I,z),y(B,"-moz-"+I,z),y(B,"-ms-"+I,z),y(B,I,z),y(B,"position","absolute"),y(B,"overflow","hidden"),q(B,k._79O=j()),E(B,"dragstart",function($){$.dataTransfer&&($.dataTransfer.setData("Text","nodeid:"+$.target.$11h),$.dataTransfer.effectAllowed="all",k.$29h.$26h())})},F("Palette",c,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:s.autoHideScrollBar,_scrollBarSize:s.scrollBarSize,_scrollBarColor:s.scrollBarColor,getViewRect:function(){return this._29I},ty:function(m){return m==l?this.getTranslateY():(this.setTranslateY(m),void 0)},setTranslateY:function(P){if(this.$32h==l){var f=this,E=f.$33h(P),g=f.$30h;f.$30h=E,f.fp("translateY",g,E)}},getTranslateY:function(){return this.$30h},setLayout:function(k){var a,p,R=this,z=R._layout;R._layout=k,"smallicons"===k?a=p=20:"iconsonly"===k?a=p=50:(a=70,p=50),R.setItemImageWidth(a),R.setItemImageHeight(p),R.setItemImagePadding(4),R.fp("layout",z,k)},getDataAt:function(V){for(var t=V.target;t&&t.$11h==l;)t=t.parentNode;return t&&t.$11h!=l?this.getDataModel().getDataById(t.$11h):void 0},$20h:function(){var b=16;return i&&(b*=1.2),b},$19h:function(){return s.paletteTitleHeight},$18h:function(){var G=s.paletteSeparatorWidth,H=s.paletteTitleBackground,e=s.paletteSeparatorColor||s.brighter(H);return G+t+" solid "+e},$17h:function(P){y(P,"cursor","pointer"),y(P,"display","inline-block"),y(P,"margin-right",(i?8:4)+t),y(P,"vertical-align",Z)},$1h:function(j){var $=this,G=e(),F=e(),Q=V("span");G[D]="palette-header",y(G,P,"relative"),y(G,f,s.paletteTitleBackground),y(G,"color",s.paletteTitleLabelColor),y(G,Z,C),y(G,x,O),y(G,"-moz-"+x,O),y(G,"padding","0 5px 0 0"),y(G,"border-top",$.$18h()),y(G,L,"100%"),y(G,"cursor","pointer"),y(G,"white-space","nowrap"),y(G,M,"hidden"),y(G,p,s.paletteTitleLabelFont),y(G,"line-height",$.$19h()+t),G.$11h=j.getId();var R=k(),g=$.$19h(),b=$.$20h();$.$17h(R),S.setCanvas(R,b,g),q(G,R);var c=j.s("tools");if(c)for(var i=0;i<c.length;i++){var v=k();$.$17h(v),S.setCanvas(v,b,g),v[D]="palette-header-tool palette-header-tool"+j.getId()+"-"+i,v.style.position="absolute",v.style.right=(b+10)*i+"px",v.toolIndex=i,q(G,v)}return R[D]="palette-toggle-icon-"+j.getId(),F[D]="palette-content",y(F,"max-height",0+t),y(F,p,s.paletteContentLabelFont),y(F,M,"hidden"),F.$11h=j.getId(),$.$9h[j.getId()]=F,Q[T]=j.getName(),y(Q,p,s.paletteTitleLabelFont),q(G,R),q(G,Q),[G,F]},$2h:function(I){var C=this,E=C._layout,i=h&&I.s("draggable")?V("a"):e(),l=k(),M=e(),j=I.getName()||"",v=I.s("title")||I.getToolTip()||j,u=C._itemMargin;l[D]="image-box";var U=C.getItemImageWidth(),O=C.getItemImageHeight();return S.setCanvas(l,U,O),q(i,l),M[T]=j,M[D]="label-box","iconsonly"!==E&&q(i,M),i[D]="palette-item",y(i,"vertical-align",Z),y(i,"cursor","pointer"),y(i,"border-radius",5+t),y(i,"border","1px solid transparent"),y(i,"text-align","center"),y(i,"display","inline-block"),y(i,"margin-left",u+t),y(i,"margin-top",u+t),y(i,"color",s.paletteContentLabelColor),"smallicons"===E?(y(l,"vertical-align","middle"),y(i,"margin-left",2+t),y(i,"margin-top",2+t),y(i,"padding",2+t),y(i,"text-align",a),y(M,"display","inline-block"),y(M,"min-width",C.$21h+C._itemMargin+t)):"largeicons"===E&&(y(M,"max-width",U+t),y(M,"overflow","hidden")),i.$11h=I.getId(),v&&(i.title=v),I.s("draggable")&&!C.handleDragAndDrop&&(h?(i.href="#",y(i,"text-decoration",z)):i.draggable="true"),i},$16h:function(V,I,X,m){var Q=S.initContext(V);S.translateAndScale(Q,0,0,1),Q.clearRect(0,0,X,X);var n=(X-m)/2;s.drawStretchImage(Q,s.getImage(I),"fill",0,n,m,m),Q.restore()},$15h:function(L){var h=this,v=L.getId(),K=h._view.querySelector(".palette-toggle-icon-"+v),A=L.isExpanded()?s.paletteCollapseIcon:s.paletteExpandIcon;if(K&&A){var W=h.$19h(),w=h.$20h();h.$16h(K,A,W,w)}},_drawToolsIcon:function(E){var J=this,z=E.s("tools");if(z)for(var M=0;M<z.length;M++){var m=J._view.querySelector(".palette-header-tool"+E.getId()+"-"+M),w=z[M].icon,_=J.$19h(),j=J.$20h();J.$16h(m,w,_,j)}},$14h:function(w){var J=this,C=w.getId(),n=J.$10h[C].querySelector(".image-box"),z=w.getImage(),F=w.s("image.stretch");if(n&&z){var L=S.initContext(n),e=J.getItemImagePadding();e="smallicons"===J._layout?e/2:e;var M=J.getItemImageWidth()-2*e,a=J.getItemImageHeight()-2*e;S.translateAndScale(L,0,0,1),L.clearRect(0,0,M,a),s.drawStretchImage(L,s.getImage(z),F,e,e,M,a,w,J,J.getBodyColor(w)),L.restore()}},validateImpl:function(){var M,Z,y,e=this,F=e.$9h,J=e._layout,P=e.$10h,z=e.$4h,h=e._view,j=e.dm();if(e.$13h&&(delete e.$13h,z={},j.each(function(K){z[K.getId()]=K})),"smallicons"===J)for(var f in z){var U=z[f];if(U instanceof X){var R=U.getName()||"",n=s.getTextSize(s.paletteContentLabelFont,R).width;e.$21h!=l&&e.$21h>n||(e.$21h=n)}}for(var f in z){y=z[f];var E,g;if(j.contains(y)){if(y instanceof ht.Group){var a,d=e.$1h(y),u=P[y.getId()];u&&(a=u.nextSibling,K(h,a),K(h,u)),Z=j.getSiblings(y).indexOf(y);var v=h.children[2*Z]||e._79O;v&&v.parentNode?(h.insertBefore(d[0],v),h.insertBefore(a||d[1],v)):(h.appendChild(d[0]),h.appendChild(a||d[1])),P[y.getId()]=d[0],M=F[y.getId()]=a||d[1],g=y.$12h;var k=y.s("promptText");g||(y.$12h=V("div"),y.$12h[T]=k||"",g=y.$12h),0===y.getChildren().size()?M.contains(g)||q(M,g):M.contains(g)&&K(M,g)}else if(E=y.getParent()){var D=e.$2h(y),A=P[y.getId()];M=F[E.getId()],A&&K(A.parentNode,A),Z=j.getSiblings(y).indexOf(y);var O=M.children[Z];O?M.insertBefore(D,O):q(M,D),P[y.getId()]=D,e.$14h(y)}}else{var x=P[y.getId()],B=x.parentNode;if(y instanceof ht.Group){var Q=x.nextSibling;K(h,x),K(h,Q),delete F[y.getId()]}else K(B,x),0===B.children.length&&(E=j.getDataById(B.$11h),E&&(g=E.$12h,g&&!B.contains(g)&&q(B,g)));delete P[y.getId()]}}e.$4h={};var _=function(){var b=e._59I,h=0;e.$32h!=l&&(clearInterval(e.$32h),h=0,delete e.$32h),e.$32h=setInterval(function(){e.$31h(),b===e._59I?(h++,h>=2&&(clearInterval(e.$32h),delete e.$32h)):(h=0,b=e._59I)},30)};for(var G in F)if(M=F[G],y=j.getDataById(F[G].$11h),e.$15h(y),e._drawToolsIcon(y),y.isExpanded()){if(M.style.maxHeight===0+t){var L=M.scrollHeight+e._itemMargin+t;o(M).duration(200).set($,L).set("padding-bottom",e._itemMargin+t).end(function(){return function(){_()}}(L))}else M.style.maxHeight=M.scrollHeight+t;M.style.paddingBottom=e._itemMargin+t}else M.style.maxHeight!==0+t&&o(M).duration(200).set($,C).set("padding-bottom",C).end(function(){return function(){_()}}(M));e.$28h(),e.$31h()},$31h:function(){for(var r=this,n=r._view,P=0,w=n.children,g=0;g<w.length;g++){var E=w[g];E.className&&E.className.indexOf("palette-")>=0&&(P+=E.offsetHeight)}r._59I=P,r.$30h=r.$33h(r.ty());var j=r.ty();n.scrollTop=-j,r._29I={x:0,y:-j,width:n.clientWidth,height:n.clientHeight},y(r._79O,Z,-j+t),r._93I()},$33h:function(y){var t=this,Q=t._29I.height-t._59I;return Q>y&&(y=Q),y>0?0:Math.round(y)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(D){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(D.property)<0&&this.redraw(),"translateY"===D.property&&(this.iv(),this._43o())},findDataByName:function(X){for(var s=this.dm().getDatas(),$=0;$<s.size();$++){var C=s.get($);if(C.getName()===X)return C}},setDataModel:function(F){var k=this,Q=k._dataModel,l=k._selectionModel;Q!==F&&(Q&&(Q.umm(k.$6h,k),Q.umd(k.$8h,k),Q.umh(k.$7h,k),l||Q.sm().ums(k.$28h,k)),k._dataModel=F,F.mm(k.$6h,k),F.md(k.$8h,k),F.mh(k.$7h,k),l?l._21I(F):F.sm().ms(k.$28h,k),k.sm().setSelectionMode("single"),k.fp("dataModel",Q,F))},$6h:function(l){var Z=this,h=Z._view,J=l.data,z=Z.$4h;"add"===l.kind?z[J.getId()]=J:"remove"===l.kind?z[J.getId()]=J:"clear"===l.kind&&(Z.$10h={},Z.$9h={},Z.$4h={},h[T]=""),Z.iv()},$7h:function(R){var o=this,z=R.data;o.$4h[z.getId()]=z,o.iv()},$8h:function(l){var X=this,U=l.data,A=l.property;"expanded"===A?X.iv():(X.$4h[U.getId()]=U,X.iv())},$28h:function(){var U,v=this,z=v.sm(),X="palette-item",Y=z.ld();this.dm().each(function(u){U=v.$10h[u.getId()],U&&U[D].indexOf(X)>=0&&(u===Y?y(U,f,s.paletteItemSelectBackground):N(U,f))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);