!function(P,Y){"use strict";var h="ht",l=h+".graph.",N=P[h],Z=N.graph,G=N.Default,X=N.Color,u=null,v="px",D=G.getInternal(),g=D.getPinchDist,p=G.preventDefault,f=G.getTouchCount,r=G.startDragging;D.addMethod(G,{overviewBackground:X.widgetBackground,overviewMaskBackground:X.transparent,overviewContentBorderColor:X.widgetBorder,overviewContentBackground:X.background},!0),Z.Overview=function(M){var v=this,b=v._view=D.createView(1,v);v._canvas=D.createCanvas(b),b.style.background=G.overviewBackground,b.appendChild(v._mask=D.createDiv()),v.setGraphView(M),v.addListeners()},G.def(l+"Overview",Y,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:G.overviewMaskBackground,_contentBorderColor:G.overviewContentBorderColor,_contentBackground:G.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(e){var P=this;if(P.gv!==e){var A=P.gv;P.gv=e,A&&(A.removeViewListener(P.handleGraphViewChanged,P),A.ump(P.handleGraphViewPropertyChanged,P)),e&&(e.addViewListener(P.handleGraphViewChanged,P),e.mp(P.handleGraphViewPropertyChanged,P)),P.fp("graphView",A,e),P.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(Y){this._autoUpdate&&"validate"===Y.kind&&this.redraw()},handleGraphViewPropertyChanged:function(L){("canvasBackground"===L.property||this.getFixToRect()&&("zoom"===L.property||"translateX"===L.property||"translateY"===L.property))&&this.redraw()},redraw:function(){var D=this;D._redraw||(D._redraw=1,D.iv(50))},validateImpl:function(){var n=this,c=n.gv,d=n._canvas,X=n.getWidth(),q=n.getHeight(),T=n._redraw;if(c){var S=n._mask,g=S.style,M=c.getViewRect(),$=this.getFixToRect(),j=$?"boolean"==typeof $?c.getContentRect():$:c.getScrollRect(),R=j.x,H=j.y,W=j.width,B=j.height,Z=n._rate=Math.max(W/X,B/q),Y=n._x=(X-W/Z)/2,A=n._y=(q-B/Z)/2;if(0!==M.width&&0!==M.height||n.hasRetry||(G.callLater(n.iv,n,u),n.hasRetry=!0),(X!==d.clientWidth||q!==d.clientHeight)&&(D.setCanvas(d,X,q),T=1),D.isSameRect(j,n._scrollRect)||(n._scrollRect=j,T=1),T){var o=D.initContext(d),m=c.getDataModel(),P=m.getBackground()||n._contentBackground,J=n._contentBorderColor,w=G.devicePixelRatio;o.clearRect(0,0,X*w,q*w);var V=m.getBackground()&&m.a("width")>0&&m.a("height")>0;P&&!V&&D.fillRect(o,Y*w,A*w,W/Z*w,B/Z*w,P),D.translateAndScale(o,-R/Z+Y,-H/Z+A,1/Z),c._42(o),o.restore(),J&&D.drawBorder(o,J,Y*w,A*w,W/Z*w,B/Z*w)}g.background=n._maskBackground,g.left=Y+(M.x-R)/Z+v,g.top=A+(M.y-H)/Z+v,g.width=M.width/Z+v,g.height=M.height/Z+v,n._redraw=null}else if(T){var o=D.initContext(d);o.clearRect(0,0,X,q),o.restore(),n._redraw=null}},center:function(g){var y=this,I=y.gv;if(I){var Q=I._zoom,U=I._29I,d=y._rate,X=y._scrollRect,n=G.getLogicalPoint(g,y._canvas),b=X.x+(n.x-y._x)*d,H=X.y+(n.y-y._y)*d;I.setTranslate((U.width/2-b)*Q,(U.height/2-H)*Q)}},handle_mousedown:function(r){this.handle_touchstart(r)},handleWindowMouseUp:function(u){this.handleWindowTouchEnd(u)},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handle_mousewheel:function(f){this.handleScroll(f,f.wheelDelta)},handle_DOMMouseScroll:function(K){2===K.axis&&this.handleScroll(K,-K.detail)},handleScroll:function(F,X){if(p(F),this.gv){var b=this.gv;X>0?b.scrollZoomIn():0>X&&b.scrollZoomOut()}},handle_touchstart:function(u){if(p(u),this.gv&&G.isLeftButton(u)){var z=this,U=z.gv,h=f(u);1===h?G.isDoubleClick(u)&&U.isResettable()?U.reset():(z.center(u),r(z,u)):2===h&&(z._dist=g(u),r(z,u))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(X){if(this.gv){var h=this,I=h._dist,H=f(X);1===H?h.center(X):2===H&&I!=u&&h.gv.handlePinch(u,g(X),I)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);