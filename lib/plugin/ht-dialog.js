!function(v,p){"use strict";var d="ht",$=v[d],j="px",H="left",G="top",B="bottom",y="right",A="innerHTML",r="className",h="",q="width",_="height",x="string",z="position",t="absolute",g="0",s="opacity",w="background",K=$.Default,o=K.getInternal(),P=$.Color,V=K.animate,R=K.isTouchable,m=K.isTouchEvent,T=null,u=(Math.sqrt,v.parseInt),Z=v.setTimeout,S=(Math.round,P.titleIconBackground),b=function(L){return typeof L===x||L instanceof String},U=function(){return document},l=function(K){return U().createElement(K)},Y=function(){var g=l("div");return g.tabIndex=-1,g.style.outline="none",g},Q=function(){return l("canvas")},X=function(Z,R){e(Z,"-webkit-transform",R),e(Z,"-ms-transform",R),e(Z,"transform",R)},e=function(I,L,Q){I.style.setProperty(L,Q,T)},i=function(N,W,G){K.def($.widget[N],W,G)},F=function(T,S){T.appendChild(S)},n=function(){return U().documentElement},J=function(){return n().clientWidth},f=function(){return n().clientHeight},M=o.addEventListener,C=o.removeEventListener,I=function(f){var a=f.touches[0];return a?a:f.changedTouches[0]};o.addMethod(K,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:S},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:S}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:S},{type:"rect",rect:[10,10,80,20],background:S}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:S},{type:"rect",rect:[10,34,56,14],background:S},{type:"rect",rect:[34,10,56,14],background:S},{type:"rect",rect:[82,10,8,56],background:S},{type:"rect",rect:[66,62,24,8],background:S}]},dialogTitleLabelColor:K.labelSelectColor,dialogTitleLabelFont:(R?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:K.labelFont,dialogTitleBackground:P.titleBackground,dialogHeaderBackground:P.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var D=function(O){var Q=this;Q.$1d=O,Q.addListeners()};K.def(D,p,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(D){var e=this,G=e.$1d,W=G.$6d,H=G._config,$=G.$7d,S=D,Q=D.target;if($.contains(Q)||K.preventDefault(D),K.isLeftButton(D)){m(D)&&(S=I(D));var s=e.$8d={x:S.pageX,y:S.pageY};e.$9d={x:s.x,y:s.y},!H.maximized&&H.draggable&&W.contains(Q)&&(e.$4d=!0,K.startDragging(e,D)),e.handle_mousemove(D)&&(e.$2d=!0,K.startDragging(e,D)),$.contains(D.target)||G.$41d.focus()}},handle_mousedown:function(s){this.handle_touchstart(s)},handle_touchend:function(s){if(K.isLeftButton(s)&&!this.$5d&&!this.$3d){var A=this,n=A.$1d,W=s.target,D=n._config,J=n.$18d,m=n.$16d;for(D.closable&&J.contains(W)&&n.hide(),D.maximizable&&m.contains(W)&&(D.maximized?n.restore():n.maximize());W&&(W.className||"").indexOf("dialog-button")<0;)W=W.parentNode;W&&W.buttonItem&&n.action&&n.action(W.buttonItem,s),delete A.$8d,delete A.$9d}},handle_mouseup:function(p){this.handle_touchend(p)},handleWindowTouchEnd:function(g){var W=this,q=W.$1d,L=q.$10d;W.$2d&&W.$3d?L.fire({kind:"endResize",target:q,originEvent:g}):W.$4d&&W.$5d&&L.fire({kind:"endMove",target:q,originEvent:g}),this.clear()},handleWindowMouseUp:function(e){this.handleWindowTouchEnd(e)},handle_mousemove:function(X){var _=this.$1d._config;if(_.maximized)return!1;if("w"!==_.resizeMode&&"h"!==_.resizeMode&&"wh"!==_.resizeMode)return!1;var o=this,t=o.getView(),g=t.querySelector(".resize-area"),s=g.getBoundingClientRect(),b={x:s.left,y:s.top,width:s.width,height:s.height};X=m(X)?I(X):X;var q=X.clientX,w=X.clientY,E={x:q,y:w};return K.containsPoint(b,E)?(e(t,"cursor","nwse-resize"),!0):(e(t,"cursor",h),void 0)},handleWindowTouchMove:function(z){z.preventDefault();var v=z;m(z)&&(v=I(z));var _=this,E=_.$8d,p=_.$9d;if(!(p.x==E.x&&p.y==E.y&&K.getDistance(p,{x:v.pageX,y:v.pageY})<=1)){var o=_.$1d,l=o._config,F=o.$21d,Y=l.resizeMode||"wh",d=v.pageX-E.x,C=v.pageY-E.y;if(_.$2d){var Q=F.offsetWidth,B=F.offsetHeight,L=Q+d,P=B+C;if(L=Math.max(L,50),P=Math.max(P,50),"center"===l.position||l.position==T){var a={},R=F.getBoundingClientRect();a.x=R.left,a.y=R.top,l.position=a}"w"===Y?(o.setSize(L,B),E.x+=L-Q):"h"===Y?(o.setSize(Q,P),E.y+=P-B):"wh"===Y&&(o.setSize(L,P),E.x+=L-Q,E.y+=P-B),_.$3d?o.$10d.fire({kind:"betweenResize",target:o,originEvent:z}):(_.$3d=!0,o.$10d.fire({kind:"beginResize",target:o,originEvent:z}))}else if(_.$4d){var U=F.getBoundingClientRect(),x=U.width,i=U.height,h=J(),t=f(),W=u(F.style.left)||0,O=u(F.style.top)||0,A=W+d,q=O+C,N=o.adjustPosition({x:A,y:q},{width:x,height:i},{width:h,height:t});N&&(A=N.x,q=N.y);var k=A-W,D=q-O;e(F,H,A+j),e(F,G,q+j),E.x+=k,E.y+=D,l.position={x:A,y:q},_.$5d?o.$10d.fire({kind:"betweenMove",target:o,originEvent:z}):(_.$5d=!0,o.$10d.fire({kind:"beginMove",target:o,originEvent:z}))}}},handleWindowMouseMove:function(W){this.handleWindowTouchMove(W)},handleWindowResize:function(){var d=this,k=d,$=k._config,U=k.$21d,N=J(),B=f(),r=$.width,L=$.height,D=$.position||"center";$.maximized?(e(U,q,N+j),e(U,_,B+j),e(U,G,g),e(U,H,g)):(e(U,q,r+j),e(U,_,L+j),"center"===D?(e(U,H,(N-r)/2+j),e(U,G,(B-L)/2+j)):(e(U,H,D.x+j),e(U,G,D.y+j))),k.iv()},handle_mousewheel:function(O){O.stopPropagation()},handle_DOMMouseScroll:function(F){F.stopPropagation()}}),$.widget.Dialog=function(f){var W=this,I=W._view=o.createView(null,W);I[r]="ht-widget-dialog",e(I,z,t),e(I,G,g),e(I,B,g),e(I,H,g),e(I,y,g),e(I,q,"auto"),e(I,_,"auto"),K.baseZIndex!=T&&e(I,"z-index",K.baseZIndex+"");var u=W.$11d=new D(W);W.bindingHandleWindowResize=u.handleWindowResize.bind(W),W.$10d=new $.Notifier,f&&W.setConfig(f)},i("Dialog",p,{ms_v:1,ms_fire:1,_modal:!0,setTitle:function(T){this._config.title=T,this.getView().querySelector(".dialog-container-title span").innerHTML=T},clearNodes:function(W){if(W)for(;W.firstChild;)W.removeChild(W.firstChild)},$31d:function(){var u=this,S=u.$6d=Y(),C=u._config,d=u.$12d=u.$13d();S[r]="dialog-container-title",e(S,"cursor","default"),e(S,"white-space","nowrap"),e(S,"overflow","hidden"),e(S,"font",K.dialogTitleLabelFont),e(S,w,C.titleBackground||K.dialogTitleBackground),e(S,"color",C.titleColor||K.dialogTitleLabelColor);var R=l("span"),z=u.$25d();if(C.titleAlign&&e(S,"text-align",C.titleAlign),C.titleIcon){var D=u.$14d=u.$15d();F(S,D)}if(C.title&&C.title.trim&&(C.title=C.title.trim()),R[A]=C.title||"&nbsp;",F(S,R),C.maximizable){var m=u.$16d=u.$17d();F(d,m)}if(C.closable){var N=u.$18d=u.$19d();F(d,N)}return F(S,d),e(S,"display","block"),e(S,"line-height",z+j),S},$13d:function(){var E=Y();return e(E,z,t),e(E,H,g),e(E,y,5+j),e(E,G,g),e(E,B,g),e(E,"text-align",y),e(E,"white-space","nowrap"),E[r]="dialog-title-controls",E},$20d:function(){var c=this.$21d=Y(),u=this._config,b=u.borderWidth;return e(c,z,"fixed"),e(c,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),e(c,"padding",g+" "+b+j+" "+b+j+" "+b+j),e(c,"box-sizing","border-box"),e(c,"-moz-box-sizing","border-box"),c[r]="dialog-container",e(c,w,u.titleBackground||K.dialogTitleBackground),c},$22d:function(){var S,g=this,P=g._config,O=g.$7d=Y(),D=P.content,X=0,w=P.contentPadding||0;P.buttons!=T&&P.buttons.length>0&&(X=32),b(D)?O[A]=D:D.getView?(S=D.getView(),F(O,S)):(S=D,F(O,S)),e(O,z,t),e(O,"font",K.dialogContentLabelFont),$.Default.appendToScreen(O);var L=O.offsetWidth+1,Q=O.offsetHeight,E=g.$25d();return P.width==T&&(P.width=L+10+2*w),P.height==T&&(P.height=Q+E+X+5+2*w),$.Default.removeHTML(O),S&&(e(S,"box-sizing","border-box"),e(S,"-moz-box-sizing","border-box"),e(S,q,"100%"),e(S,_,"100%")),O[r]="dialog-content",e(O,G,E+w+j),e(O,B,X+w+j),e(O,H,w+j),e(O,y,w+j),e(O,"overflow","hidden"),O},getOverlayDiv:function(){return this.$41d},$23d:function(){if(this.$41d)return this.$41d;var a=this.$41d=Y();return a[r]="dialog-overlay",e(a,z,t),e(a,G,g),e(a,B,g),e(a,H,g),e(a,y,g),e(a,w,"rgba(235, 235, 235, 0.7)"),a},_config:T,setSize:function(h,J){var c=this,Z=c._config;Z&&(Z.width=h,Z.height=J,c.isShowing()&&(c.bindingHandleWindowResize(),c.iv()))},getConfig:function(){return this._config},$24d:function(){var k=this._config,u=k.titleIconSize||16;return R&&(u*=1.2),u},$25d:function(){var I=this._config,C=I.titleHeight||K.widgetTitleHeight;return C},$26d:function(J){e(J,"cursor","pointer"),e(J,"display","inline-block"),e(J,"margin-right",(R?8:4)+j),e(J,"vertical-align",G)},$27d:function(){var k=this.$30d=Y(),M=10;return R&&(M=20),e(k,q,M+j),e(k,_,M+j),e(k,z,t),e(k,B,g),e(k,y,g),k[r]="resize-area",k},$15d:function(){var U=this,K=Q();K[r]="dialog-title-control dialog-title-control-icon";var D=U.$25d(),Y=U.$24d();return U.$26d(K),o.setCanvas(K,Y,D),K},$17d:function(){var J=Q();J[r]="dialog-title-control dialog-title-control-maximize";var x=this.$25d(),C=this.$24d();return this.$26d(J),o.setCanvas(J,C,x),J},$19d:function(){var Y=Q();Y[r]="dialog-title-control dialog-title-control-close";var j=this.$25d(),y=this.$24d();return this.$26d(Y),o.setCanvas(Y,y,j),Y},$28d:function(){var f=Y();return e(f,w,K.dialogContentBackground||"white"),e(f,q,"100%"),e(f,_,"100%"),e(f,z,"relative"),f},$29d:function(){var k=this,d=Y();e(d,"line-height",32+j),e(d,z,t),e(d,B,g),e(d,H,g),e(d,"white-space","nowrap"),e(d,"overflow","hidden"),e(d,y,g),e(d,w,K.dialogHeaderBackground),d[r]="dialog-container-buttons";var b=this._config,v=b.buttonsAlign||y,D=0;return e(d,"text-align",v),k.$42d=[],b.buttons.forEach(function(c){var X={};for(var _ in c)X[_]=c[_];c.background||(X.background=K.dialogButtonBackground),c.selectBackground||(X.selectBackground=K.dialogButtonSelectBackground),c.labelColor||(X.labelColor=K.dialogButtonLabelColor);var J=K.createObject($.widget.Button,X),p=J.getView();p[r]="dialog-button "+c.className,p.buttonItem=c,k.$42d.push(J),e(p,z,"relative"),e(p,"display","inline-block"),e(p,"text-align",H),e(p,"height",24+j);var N=R?10:5;v===H||v===y?e(p,"margin-"+v,N+j):0===D||e(p,"margin-"+H,N+j),e(p,"vertical-align","middle");var w=K.getTextSize(J.getLabelFont(),c.label).width+10;J.onClicked=function(x){c.action&&c.action.call(k,c,x)},e(p,q,w+j),F(d,J.getView()),D++}),d},setConfig:function(Q){if(Q){var h=this,P=h._view;h._config=Q,h.action=Q.action,h.clearNodes(P),Q.borderWidth==T&&(Q.borderWidth=5);var s=h.$23d(),i=h.$28d(),U=h.$31d(),S=h.$22d(),l=h.$20d(),b=h.$30d=h.$27d();if(F(P,s),F(P,l),F(l,i),F(i,U),F(i,S),Q.buttons!=T&&Q.buttons.length>0){var o=h.$29d();F(i,o)}F(l,b),Q.maximized?(Q.maximized=!1,h.bindingHandleWindowResize(),h.maximize(!0)):h.bindingHandleWindowResize(),h.isShowing()&&h.iv()}},hide:function(){var X=this,L=X.$21d,m=X.$41d,q=X._view;q[r]="ht-widget-dialog",V(L).duration(200).scale(.7).set(s,g).end(function(){X.onHidden&&X.onHidden(),$.Default.removeHTML(q),X.$10d.fire({kind:"hide",target:X})}),V(m).duration(200).set(s,g).end(),C(v,"resize",X.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(E){this._modal=E;var V=this.$23d();V.style.display=E?"block":"none";var v=this._view;e(v,q,E?"auto":g),e(v,_,E?"auto":g)},isModal:function(){return this._modal},$32d:function(){var L=this,Q=L._config,d=L.$21d;X(d,h),L.iv(),Q.maximized?L.$10d.fire({kind:"maximize",target:L}):L.$10d.fire({kind:"restore",target:L})},maximize:function(y){var c=this,i=c.$21d,N=c._config;if(!N.maximized){N.maximized=!0,c.$33d(),c.$16d[r]="dialog-title-control dialog-title-control-minimize";var A=N.width,x=N.height,f=u(i.style.left)||0,C=u(i.style.top)||0;c.$36d=A,c.$37d=x,c.$34d=f,c.$35d=C;var l,$=y?0:200,g=this._view.parentNode;l=g&&g!==document.body?this._view.parentNode.getBoundingClientRect():K.getWindowInfo(),V(i).duration($).set(H,l.left+j).set(G,l.top+j).set(q,l.width+j).set(_,l.height+j).end(function(){c.$32d()})}},restore:function(){var o=this,Q=o.$34d,k=o.$35d,E=o.$36d,P=o.$37d,F=o._config;if(F.maximized&&(F.maximized=!1,o.$33d(),o.$16d[r]="dialog-title-control dialog-title-control-maximize",o.isShowing()&&Q!=T&&k!=T&&E!=T&&P!=T)){var z=o.$21d;V(z).duration(200).set(H,Q+j).set(G,k+j).set(q,E+j).set(_,P+j).end(function(){o.$32d()})}delete o.$34d,delete o.$35d,delete o.$36d,delete o.$37d},show:function(H){var A=this,i=A._view,N=A._config,p=A.$21d,Y=A.$41d;H=H||N.parentDOM,N&&N.zIndex!=T&&e(i,"z-index",N.zIndex+h),H?$.Default.appendChild(H,i):$.Default.appendToScreen(i),X(p,"scale(0.7)"),e(p,s,g),A.iv(),A.validate(),A._view[r]+=" dialog-show",Z(function(){V(p).duration(200).scale(1).set(s,"1").end(function(){e(p,q,p.clientWidth+j),e(p,_,p.clientHeight+j),A.onShown&&A.onShown(),A.$10d.fire({kind:"show",target:A});var V=N&&N.content;V&&V.iv&&V.iv()}),V(Y).duration(200).set(s,"1").end(),M(v,"resize",A.bindingHandleWindowResize)},30)},setPosition:function(W){var p=this.$21d;p.style.left=W.x+"px",p.style.top=W.y+"px"},addEventListener:function(x,Y,W){this.$10d.add(x,Y,W)},removeEventListener:function(h,u){this.$10d.remove(h,u)},$38d:function(M,R,D,x){var O=o.initContext(M);o.translateAndScale(O,0,0,1),O.clearRect(0,0,D,D);var S=(D-x)/2;K.drawStretchImage(O,K.getImage(R),"fill",0,S,x,x),O.restore()},$33d:function(){var w=this,t=w._config,N=w.$16d,i=t.maximized?K.dialogRestoreIcon:K.dialogMaximizeIcon;if(N&&i){var P=w.$25d(),v=w.$24d();w.$38d(N,K.getImage(i),P,v)}},$39d:function(){var E=this,I=E._config,$=E.$14d,k=I.titleIcon;if($&&k){var X=E.$25d(),S=E.$24d();E.$38d($,K.getImage(k),X,S)}},$40d:function(){var x=this,q=x.$18d,d=K.dialogCloseIcon;if(q&&d){var G=x.$25d(),X=x.$24d();x.$38d(q,K.getImage(d),G,X)}},invalidate:function(L){var H=this,w=H.$42d;H._68I||(H._68I=1,K.callLater(H.validate,H,T,L),H.onInvalidated&&H.onInvalidated(),H.fireViewEvent("invalidate"));var d=H._config.content;d.invalidate&&d.invalidate(),w&&w.forEach(function(d){d.iv()})},validateImpl:function(){var P=this;P.$40d(),P.$33d(),P.$39d();var X=P._config.content;X.initView&&(X.setX(0),X.setY(0),X.setWidth(P.$7d.clientWidth),X.setHeight(P.$7d.clientHeight))},adjustPosition:function(L,q,X){var U=q.width,y=q.height,d=X.width,T=X.height,B=L.x,b=L.y,o=this._config,w=o.minDragSize||20;return"inside"===o.dragMode?(B+U>d&&(B=d-U),b+y>T&&(b=T-y),0>B&&(B=0),0>b&&(b=0)):(null==o.dragMode||"none"===o.dragMode)&&(-U+w>B&&(B=-U+w),B>d-w&&(B=d-w),b>T-w&&(b=T-w),0>b&&(b=0)),{x:B,y:b}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);